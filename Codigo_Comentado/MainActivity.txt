package com.sakhura.controlpaseosmascotas

// IMPORTS - Bibliotecas que necesitamos para que funcione la app
import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.activity.enableEdgeToEdge
import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.items
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.*
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import androidx.lifecycle.viewmodel.compose.viewModel
import com.sakhura.controlpaseosmascotas.datos.BaseDeDatosPaseos
import com.sakhura.controlpaseosmascotas.datos.EntidadPaseoMascota
import com.sakhura.controlpaseosmascotas.modelovista.ModeloVistaPaseos
import com.sakhura.controlpaseosmascotas.repositorio.RepositorioPaseosMascotas
import com.sakhura.controlpaseosmascotas.ui.theme.ControlpaseosmascotasTheme
import java.text.NumberFormat
import java.text.SimpleDateFormat
import java.util.*

// ============================================================================
// CLASE PRINCIPAL - PUNTO DE ENTRADA DE LA APLICACI√ìN
// ============================================================================

class MainActivity : ComponentActivity() {
    // üéØ IMPORTANTE: Esta funci√≥n se ejecuta cuando se abre la app
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge() // Permite que la app use toda la pantalla
        setContent {
            // üé® ControlpaseosmascotasTheme aplica el tema visual (colores, fuentes)
            ControlpaseosmascotasTheme {
                AplicacionPaseosMascotas() // Nuestra aplicaci√≥n principal
            }
        }
    }
}

// ============================================================================
// PANTALLA PRINCIPAL - ARQUITECTURA Y CONFIGURACI√ìN
// ============================================================================

@OptIn(ExperimentalMaterial3Api::class) // Permite usar APIs experimentales
@Composable
fun AplicacionPaseosMascotas() {
    // üèóÔ∏è CONFIGURACI√ìN DE ARQUITECTURA (MUY IMPORTANTE)
    // Aqu√≠ se conectan todas las capas de la aplicaci√≥n
    
    val context = LocalContext.current // Contexto de Android (necesario para la DB)
    
    // üíæ Paso 1: Crear/obtener la base de datos
    val baseDeDatos = BaseDeDatosPaseos.obtenerBaseDeDatos(context)
    
    // üìä Paso 2: Crear el repositorio (organizador de datos)
    val repositorio = RepositorioPaseosMascotas(baseDeDatos.accesoDatosPaseos())
    
    // üß† Paso 3: Crear el ViewModel (cerebro de la aplicaci√≥n)
    val viewModel: ModeloVistaPaseos = viewModel { ModeloVistaPaseos(repositorio) }

    // üéõÔ∏è ESTADO LOCAL DE LA INTERFAZ
    // Este estado controla si se muestra el formulario o la lista
    var mostrandoFormulario by remember { mutableStateOf(false) }
    
    // üì± SCAFFOLD - ESTRUCTURA PRINCIPAL DE LA PANTALLA
    Scaffold(
        topBar = {
            // üìã Barra superior con t√≠tulo
            TopAppBar(
                title = { Text("üêï Control de Paseos") },
                colors = TopAppBarDefaults.topAppBarColors(
                    containerColor = MaterialTheme.colorScheme.primaryContainer
                )
            )
        },
        floatingActionButton = {
            // ‚ûï Bot√≥n flotante que cambia entre + y X
            FloatingActionButton(
                onClick = { 
                    // üîÑ Cambia el estado: si est√° mostrando formulario, lo cierra y viceversa
                    mostrandoFormulario = !mostrandoFormulario 
                }
            ) {
                Icon(
                    // üéØ L√ìGICA CONDICIONAL: √çcono cambia seg√∫n el estado
                    imageVector = if (mostrandoFormulario) Icons.Default.Close else Icons.Default.Add,
                    contentDescription = if (mostrandoFormulario) "Cerrar" else "Agregar paseo"
                )
            }
        }
    ) { paddingValues ->
        // üìê LAYOUT PRINCIPAL - Organizaci√≥n vertical
        Column(
            modifier = Modifier
                .fillMaxSize() // Ocupa toda la pantalla
                .padding(paddingValues) // Respeta los espacios del Scaffold
                .padding(16.dp) // Margen interno
        ) {
            // üìä SIEMPRE mostrar estad√≠sticas
            EstadisticasCard(viewModel)

            Spacer(modifier = Modifier.height(16.dp)) // Espacio entre elementos

            // üéØ NAVEGACI√ìN CONDICIONAL - MUY IMPORTANTE
            if (mostrandoFormulario) {
                // Si el estado es true, muestra el formulario
                FormularioNuevoPaseo(viewModel) {
                    mostrandoFormulario = false // Callback para cerrar el formulario
                }
            } else {
                // Si el estado es false, muestra la lista
                ListaDePaseos(viewModel)
            }
        }
    }
}

// ============================================================================
// TARJETA DE ESTAD√çSTICAS - DATOS REACTIVOS
// ============================================================================

@Composable
fun EstadisticasCard(viewModel: ModeloVistaPaseos) {
    // üîÑ REACTIVIDAD - Estos valores se actualizan autom√°ticamente
    // Cada vez que cambian los datos en la base de datos, la UI se redibuja
    val totalGanado by viewModel.totalGanado.collectAsState()
    val totalPendiente by viewModel.totalPendiente.collectAsState()

    // üé® CARD - Contenedor con elevaci√≥n y bordes redondeados
    Card(
        modifier = Modifier.fillMaxWidth(),
        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            // üìã T√≠tulo de la secci√≥n
            Text(
                text = "üìä Estad√≠sticas",
                style = MaterialTheme.typography.headlineSmall,
                fontWeight = FontWeight.Bold
            )

            Spacer(modifier = Modifier.height(8.dp))

            // üìä LAYOUT HORIZONTAL - Tres columnas de estad√≠sticas
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween // Distribuci√≥n uniforme
            ) {
                // üí∞ COLUMNA 1: Dinero ganado (pagado)
                Column(
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    Text(
                        text = "üí∞ Ganado",
                        style = MaterialTheme.typography.bodyMedium
                    )
                    Text(
                        text = formatearDinero(totalGanado), // üéØ Formatea como moneda chilena
                        style = MaterialTheme.typography.headlineSmall,
                        color = Color(0xFF4CAF50), // Verde (color de √©xito)
                        fontWeight = FontWeight.Bold
                    )
                }

                // ‚è≥ COLUMNA 2: Dinero pendiente
                Column(
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    Text(
                        text = "‚è≥ Pendiente",
                        style = MaterialTheme.typography.bodyMedium
                    )
                    Text(
                        text = formatearDinero(totalPendiente),
                        style = MaterialTheme.typography.headlineSmall,
                        color = Color(0xFFFF9800), // Naranja (color de advertencia)
                        fontWeight = FontWeight.Bold
                    )
                }

                // üíµ COLUMNA 3: Total general (ganado + pendiente)
                Column(
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    Text(
                        text = "üíµ Total",
                        style = MaterialTheme.typography.bodyMedium
                    )
                    Text(
                        // üßÆ C√ÅLCULO EN TIEMPO REAL
                        text = formatearDinero(totalGanado + totalPendiente),
                        style = MaterialTheme.typography.headlineSmall,
                        color = MaterialTheme.colorScheme.primary,
                        fontWeight = FontWeight.Bold
                    )
                }
            }
        }
    }
}

// ============================================================================
// FORMULARIO - MANEJO DE ESTADOS Y VALIDACIONES
// ============================================================================

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun FormularioNuevoPaseo(
    viewModel: ModeloVistaPaseos,
    onPaseoAgregado: () -> Unit // üéØ Callback - funci√≥n que se ejecuta al guardar
) {
    // üìä ESTADOS DEL FORMULARIO - Conectados al ViewModel
    // Cada campo del formulario tiene su propio estado
    val nombreMascota by viewModel.nombreMascota.collectAsState()
    val tipoMascota by viewModel.tipoMascota.collectAsState()
    val nombreCliente by viewModel.nombreCliente.collectAsState()
    val duracionHoras by viewModel.duracionHoras.collectAsState()
    val tarifaPorHora by viewModel.tarifaPorHora.collectAsState()
    val notas by viewModel.notas.collectAsState()

    // üéõÔ∏è ESTADO LOCAL para el dropdown
    var expandedTipoMascota by remember { mutableStateOf(false) }
    val tiposMascotas = listOf("Perro", "Gato", "Conejo", "Otro")

    // üì± CARD CON SCROLL - Importante para formularios largos
    Card(
        modifier = Modifier.fillMaxWidth(),
        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
    ) {
        Column(
            modifier = Modifier
                .padding(16.dp)
                .verticalScroll(rememberScrollState()) // üéØ SCROLL VERTICAL - Para ver todo el formulario
        ) {
            Text(
                text = "‚ûï Nuevo Paseo",
                style = MaterialTheme.typography.headlineSmall,
                fontWeight = FontWeight.Bold
            )

            Spacer(modifier = Modifier.height(16.dp))

            // üêï CAMPO 1: Nombre de la mascota
            OutlinedTextField(
                value = nombreMascota, // Lee del ViewModel
                onValueChange = viewModel::actualizarNombreMascota, // üéØ Actualiza el ViewModel
                label = { Text("üêï Nombre de la mascota") },
                modifier = Modifier.fillMaxWidth()
            )

            Spacer(modifier = Modifier.height(8.dp))

            // üêæ CAMPO 2: Tipo de mascota (DROPDOWN)
            ExposedDropdownMenuBox(
                expanded = expandedTipoMascota,
                onExpandedChange = { expandedTipoMascota = !expandedTipoMascota }
            ) {
                OutlinedTextField(
                    value = tipoMascota,
                    onValueChange = { }, // Vac√≠o porque es readOnly
                    readOnly = true, // üéØ Solo lectura - no se puede escribir directamente
                    label = { Text("üêæ Tipo de mascota") },
                    trailingIcon = {
                        ExposedDropdownMenuDefaults.TrailingIcon(expanded = expandedTipoMascota)
                    },
                    modifier = Modifier
                        .fillMaxWidth()
                        .menuAnchor() // üéØ Conecta el campo con el men√∫
                )

                // üìã MEN√ö DESPLEGABLE
                ExposedDropdownMenu(
                    expanded = expandedTipoMascota,
                    onDismissRequest = { expandedTipoMascota = false }
                ) {
                    // üîÑ LOOP - Crea un item por cada tipo de mascota
                    tiposMascotas.forEach { tipo ->
                        DropdownMenuItem(
                            text = { Text(tipo) },
                            onClick = {
                                viewModel.actualizarTipoMascota(tipo) // Actualiza el ViewModel
                                expandedTipoMascota = false // Cierra el men√∫
                            }
                        )
                    }
                }
            }

            Spacer(modifier = Modifier.height(8.dp))

            // üë§ CAMPO 3: Nombre del cliente
            OutlinedTextField(
                value = nombreCliente,
                onValueChange = viewModel::actualizarNombreCliente,
                label = { Text("üë§ Nombre del cliente") },
                modifier = Modifier.fillMaxWidth()
            )

            Spacer(modifier = Modifier.height(8.dp))

            // ‚è±Ô∏èüíµ CAMPOS 4 y 5: Duraci√≥n y tarifa (EN LA MISMA FILA)
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.spacedBy(8.dp) // Espacio entre campos
            ) {
                // ‚è±Ô∏è Duraci√≥n en horas
                OutlinedTextField(
                    value = duracionHoras,
                    onValueChange = viewModel::actualizarDuracionHoras,
                    label = { Text("‚è±Ô∏è Horas") },
                    modifier = Modifier.weight(1f) // üéØ WEIGHT - Ocupa la mitad del espacio
                )

                // üíµ Tarifa por hora
                OutlinedTextField(
                    value = tarifaPorHora,
                    onValueChange = viewModel::actualizarTarifaPorHora,
                    label = { Text("üíµ Tarifa/hora") },
                    modifier = Modifier.weight(1f) // üéØ WEIGHT - Ocupa la otra mitad
                )
            }

            Spacer(modifier = Modifier.height(12.dp))

            // üí∞ C√ÅLCULO AUTOM√ÅTICO - Solo se muestra si hay datos
            if (duracionHoras.isNotEmpty() && tarifaPorHora.isNotEmpty()) {
                val total = viewModel.calcularMontoTotal() // üßÆ Calcula: horas √ó tarifa
                Card(
                    colors = CardDefaults.cardColors(
                        containerColor = MaterialTheme.colorScheme.primaryContainer
                    )
                ) {
                    Text(
                        text = "üí∞ Total: ${formatearDinero(total)}",
                        style = MaterialTheme.typography.headlineSmall,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier.padding(16.dp)
                    )
                }

                Spacer(modifier = Modifier.height(12.dp))
            }

            // üìù CAMPO 6: Notas adicionales
            OutlinedTextField(
                value = notas,
                onValueChange = viewModel::actualizarNotas,
                label = { Text("üìù Notas (opcional)") },
                placeholder = { Text("Ej: Paseo por el parque, muy activo") },
                modifier = Modifier.fillMaxWidth(),
                minLines = 2, // M√≠nimo 2 l√≠neas
                maxLines = 4  // M√°ximo 4 l√≠neas
            )

            Spacer(modifier = Modifier.height(20.dp))

            // üíæ BOT√ìN GUARDAR - Con validaci√≥n
            Button(
                onClick = {
                    viewModel.agregarPaseo() // üéØ Guarda en la base de datos
                    onPaseoAgregado() // üéØ Ejecuta el callback (cierra el formulario)
                },
                enabled = viewModel.formularioEsValido(), // üéØ VALIDACI√ìN - Solo activo si es v√°lido
                modifier = Modifier
                    .fillMaxWidth()
                    .height(50.dp), // Altura fija para mejor visibilidad
                colors = ButtonDefaults.buttonColors(
                    containerColor = MaterialTheme.colorScheme.primary
                )
            ) {
                Icon(
                    imageVector = Icons.Default.Check,
                    contentDescription = null,
                    modifier = Modifier.size(20.dp)
                )
                Spacer(modifier = Modifier.width(8.dp))
                Text(
                    text = "üíæ Guardar Paseo",
                    style = MaterialTheme.typography.bodyLarge,
                    fontWeight = FontWeight.Bold
                )
            }

            // Espaciado adicional al final
            Spacer(modifier = Modifier.height(20.dp))
        }
    }
}

// ============================================================================
// LISTA DE PASEOS - LAZY LOADING Y ESTADOS VAC√çOS
// ============================================================================

@Composable
fun ListaDePaseos(viewModel: ModeloVistaPaseos) {
    // üìä ESTADO REACTIVO - Lista se actualiza autom√°ticamente
    val paseos by viewModel.paseos.collectAsState()

    Text(
        text = "üìã Lista de Paseos",
        style = MaterialTheme.typography.headlineSmall,
        fontWeight = FontWeight.Bold
    )

    Spacer(modifier = Modifier.height(8.dp))

    // üéØ L√ìGICA CONDICIONAL - Muestra mensaje si no hay datos
    if (paseos.isEmpty()) {
        // üìÑ ESTADO VAC√çO - Mensaje cuando no hay paseos
        Card(
            modifier = Modifier.fillMaxWidth(),
            elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)
        ) {
            Column(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(32.dp),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = "üêï",
                    style = MaterialTheme.typography.displayLarge
                )
                Text(
                    text = "No hay paseos registrados",
                    style = MaterialTheme.typography.bodyLarge
                )
                Text(
                    text = "¬°Agrega tu primer paseo con el bot√≥n +!",
                    style = MaterialTheme.typography.bodyMedium,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }
    } else {
        // üìú LISTA CON LAZY LOADING - Eficiente para muchos elementos
        LazyColumn(
            verticalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            // üîÑ ITEMS - Crea una tarjeta por cada paseo
            items(paseos) { paseo ->
                TarjetaPaseo(
                    paseo = paseo,
                    // üéØ CALLBACKS - Funciones que se ejecutan al tocar botones
                    onCambiarEstadoPago = { viewModel.cambiarEstadoPago(paseo) },
                    onEliminar = { viewModel.eliminarPaseo(paseo) }
                )
            }
        }
    }
}

// ============================================================================
// TARJETA DE PASEO - COMPOSABLE COMPLEJO CON M√öLTIPLES ESTADOS
// ============================================================================

@Composable
fun TarjetaPaseo(
    paseo: EntidadPaseoMascota, // üìä Datos del paseo
    onCambiarEstadoPago: () -> Unit, // üéØ Funci√≥n para cambiar estado
    onEliminar: () -> Unit // üéØ Funci√≥n para eliminar
) {
    // üé® CARD CON COLORES CONDICIONALES
    Card(
        modifier = Modifier.fillMaxWidth(),
        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp),
        colors = CardDefaults.cardColors(
            // üéØ COLOR DIN√ÅMICO - Verde si est√° pagado, naranja si est√° pendiente
            containerColor = if (paseo.estaPagado) {
                Color(0xFFE8F5E8) // Verde claro para paseos pagados
            } else {
                Color(0xFFFFF3E0) // Naranja claro para paseos pendientes
            }
        )
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            // üìä FILA SUPERIOR - Informaci√≥n principal y estado
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.Top
            ) {
                // üìù COLUMNA IZQUIERDA - Informaci√≥n del paseo
                Column(
                    modifier = Modifier.weight(1f) // Ocupa el espacio disponible
                ) {
                    // üêï Nombre con emoji din√°mico
                    Text(
                        text = "${obtenerEmojiTipo(paseo.tipoMascota)} ${paseo.nombreMascota}",
                        style = MaterialTheme.typography.headlineSmall,
                        fontWeight = FontWeight.Bold
                    )

                    // üë§ Nombre del cliente
                    Text(
                        text = "üë§ ${paseo.nombreCliente}",
                        style = MaterialTheme.typography.bodyMedium,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )

                    // üìÖ Fecha formateada
                    Text(
                        text = "üìÖ ${formatearFecha(paseo.fecha)}",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }

                // üè∑Ô∏è CHIP DE ESTADO - Bot√≥n interactivo
                AssistChip(
                    onClick = onCambiarEstadoPago, // üéØ Cambia el estado al tocar
                    label = {
                        Text(
                            // üéØ TEXTO CONDICIONAL
                            text = if (paseo.estaPagado) "‚úÖ Pagado" else "‚è≥ Pendiente"
                        )
                    },
                    colors = AssistChipDefaults.assistChipColors(
                        // üéØ COLOR CONDICIONAL
                        containerColor = if (paseo.estaPagado) {
                            Color(0xFF4CAF50) // Verde para pagado
                        } else {
                            Color(0xFFFF9800) // Naranja para pendiente
                        },
                        labelColor = Color.White
                    )
                )
            }

            Spacer(modifier = Modifier.height(8.dp))

            // üí∞ FILA DE INFORMACI√ìN FINANCIERA
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Text(
                    text = "‚è±Ô∏è ${paseo.duracionHoras}h",
                    style = MaterialTheme.typography.bodyMedium
                )
                Text(
                    text = "${formatearDinero(paseo.tarifaPorHora)}/h",
                    style = MaterialTheme.typography.bodyMedium
                )
                Text(
                    text = "üí∞ ${formatearDinero(paseo.montoTotal)}",
                    style = MaterialTheme.typography.bodyMedium,
                    fontWeight = FontWeight.Bold,
                    color = MaterialTheme.colorScheme.primary
                )
            }

            // üìù NOTAS - Solo se muestran si existen
            if (paseo.notas.isNotBlank()) {
                Spacer(modifier = Modifier.height(8.dp))
                Text(
                    text = "üìù ${paseo.notas}",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }

            // üóëÔ∏è BOT√ìN ELIMINAR
            Spacer(modifier = Modifier.height(8.dp))
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.End
            ) {
                TextButton(
                    onClick = onEliminar, // üéØ Elimina el paseo al tocar
                    colors = ButtonDefaults.textButtonColors(
                        contentColor = Color(0xFFD32F2F) // Rojo para indicar peligro
                    )
                ) {
                    Icon(
                        imageVector = Icons.Default.Delete,
                        contentDescription = "Eliminar",
                        modifier = Modifier.size(16.dp)
                    )
                    Spacer(modifier = Modifier.width(4.dp))
                    Text("Eliminar")
                }
            }
        }
    }
}

// ============================================================================
// FUNCIONES DE UTILIDAD - FORMATEO Y CONVERSIONES
// ============================================================================

// üí∞ FORMATEAR DINERO EN PESOS CHILENOS
fun formatearDinero(cantidad: Double): String {
    // üéØ NumberFormat autom√°ticamente formatea seg√∫n la configuraci√≥n chilena
    val formato = NumberFormat.getCurrencyInstance(Locale("es", "CL"))
    return formato.format(cantidad)
    // Ejemplo: 12500.0 ‚Üí $12.500
}

// üìÖ FORMATEAR FECHA EN FORMATO DD/MM/YYYY
fun formatearFecha(fecha: Date): String {
    // üéØ SimpleDateFormat permite personalizar el formato de fecha
    val formato = SimpleDateFormat("dd/MM/yyyy", Locale("es", "CL"))
    return formato.format(fecha)
    // Ejemplo: Date() ‚Üí "27/07/2025"
}

// üêæ OBTENER EMOJI SEG√öN TIPO DE MASCOTA
fun obtenerEmojiTipo(tipo: String): String {
    // üéØ WHEN EXPRESSION - Similar a switch en otros lenguajes
    return when (tipo) {
        "Perro" -> "üêï"
        "Gato" -> "üê±"
        "Conejo" -> "üê∞"
        else -> "üêæ" // Valor por defecto para cualquier otro tipo
    }
}

// ============================================================================
// CONCEPTOS CLAVE PARA RECORDAR:
// ============================================================================

/*
üéØ CONCEPTOS M√ÅS IMPORTANTES:

1. **REACTIVIDAD**: Los datos se actualizan autom√°ticamente
   - collectAsState() conecta la UI con el ViewModel
   - Cuando cambian los datos, la interfaz se redibuja sola

2. **SEPARACI√ìN DE RESPONSABILIDADES**:
   - MainActivity: Solo interfaz de usuario
   - ViewModel: L√≥gica de negocio
   - Repository: Organizaci√≥n de datos
   - Database: Persistencia

3. **ESTADOS EN COMPOSE**:
   - remember: Estado local del Composable
   - collectAsState: Estado que viene del ViewModel
   - mutableStateOf: Estado que puede cambiar

4. **CALLBACKS**: Funciones que se pasan como par√°metros
   - onClick: Se ejecuta al tocar un bot√≥n
   - onValueChange: Se ejecuta al escribir en un campo
   - onPaseoAgregado: Se ejecuta al guardar un paseo

5. **VALIDACIONES**: 
   - formularioEsValido() verifica que los campos est√©n completos
   - enabled en Button controla si se puede tocar o no

6. **FORMATEO**: 
   - formatearDinero() convierte n√∫meros a formato de moneda
   - formatearFecha() convierte Date a texto legible

7. **L√ìGICA CONDICIONAL**:
   - if (condici√≥n) { A } else { B }
   - when (variable) { caso1 -> resultado1 }

8. **LAZY LOADING**:
   - LazyColumn solo renderiza los elementos visibles
   - Muy eficiente para listas largas

9. **MODIFIERS**:
   - fillMaxWidth(): Ocupa todo el ancho
   - padding(): Agrega m√°rgenes
   - weight(): Distribuci√≥n proporcional en Row/Column

10. **ARQUITECTURA MVVM**:
    - Model: EntidadPaseoMascota (datos)
    - View: Composables (interfaz)
    - ViewModel: ModeloVistaPaseos (l√≥gica)
*/